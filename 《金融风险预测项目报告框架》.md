《金融风险预测项目报告框架》

# 1项目背景

## 1.1 研究目的

​      随着经济的发展与金融市场的复杂化，企业信用风险与违约问题日益突出。金融机构在贷款、融资和投资过程中面临巨大的风险控制挑战。如果无法有效识别潜在的高风险企业，可能导致不良贷款率上升，进而威胁金融体系的稳定。

​      本项目旨在利用企业多维度数据（财务数据、银行流水、税务数据等），建立可解释的风险预测模型，辅助金融机构进行风险评估和决策，提高风控水平。通过引入多种机器学习模型并进行对比分析，我们不仅关注预测性能，还重视模型的可解释性，以便在实践中为金融机构提供合理、透明的决策依据。

## 1.2 金融风险与违约预测的重要性

**（1）降低****信贷****风险**：通过提前识别可能违约的企业，减少金融机构潜在损失。

**（2）提升风控效率**：利用数据驱动的模型，替代传统人工审核，节省时间与成本。

**（3）促进金融稳定**：降低大规模违约带来的系统性金融风险。

**（4）服务****实体经济**：精准识别优质企业，支持其融资与发展。

### 1.3 国内外研究现状综述（参考文献）

**国外研究**：

- 最早的信用风险评估方法主要依赖于统计学模型，如逻辑回归（Logistic Regression）与判别分析（Discriminant Analysis）。
- 随着机器学习的发展，随机森林、梯度提升树（XGBoost、LightGBM）等方法被广泛应用，并在多个实证研究中显示出优越的预测性能。
- 当前趋势是将模型的预测能力与可解释性结合，例如利用 SHAP、LIME 等方法解释企业违约的关键因素。

**国内研究**：

- 国内学者逐步将机器学习方法引入到信贷审批与风险预测中，提升了风险识别效率。
- 大数据背景下，研究者开始结合工商信息、舆情数据、税务记录等非传统数据源，以增强预测模型的表现。
- 然而，目前国内相关研究仍偏重于模型性能的优化，对可解释性与落地应用的关注不足。

## 1.4 本项目数据来源与说明（财务数据、银行流水、税务数据等企业信息）

本项目基于 **278,821 条企业多维度数据样本**，涵盖 **51 个特征字段**，包括：

- **财务数据**：利润表、资产负债表、现金流量表等关键财务指标；
- **银行流水**：企业日常资金流动情况，反映企业偿债能力；
- **税务数据**：纳税记录与税收负担，反映企业经营合规性；
- **外部信息**：行业分类、企业规模、成立时间等背景信息。

这些数据为建模提供了充分支撑，使我们能够从不同维度刻画企业经营状况与潜在风险。

1. # 方法

## 2.1 数据处理流程

###  2.1.1 数据采集与清洗

 原始数据中存在缺失值、重复值及异常值。我们采用以下方法：

  删除重复样本，保证数据唯一性。

  对缺失值采用多重插补、均值填充或行业均值替代，减少信息损失。

  对异常值使用箱线图和3σ原则识别，并根据业务逻辑进行修正或剔除。

###  2.1.2 特征工程（缺失值处理、标准化、One-hot编码）

 **缺失值处理**：对关键财务指标缺失值采用行业均值或历史均值填充。

 **标准化**：对金额类指标（如总资产、营业收入）进行标准化，避免量纲差异影响模型。

 **One-hot 编码**：对行业分类、地区等类别变量进行独热编码，转化为可用的数值特征。

###  2.1.3 特征选择方法（IV值、卡方检验、相关性过滤）

 为了避免冗余信息和多重共线性，我们采用以下特征选择策略：

- **IV** **值筛选**：保留对目标变量区分度较高的变量。
- **卡方检验**：筛选与风险标签显著相关的分类变量。
- **相关性过滤**：删除高度相关（相关系数 > 0.85）的变量，减少冗余。

## 2.2 建模方法

###  2.2.1 逻辑回归

 逻辑回归作为传统方法，具有可解释性强的优点，能够直观地解释各特征对违约概率的影响。

###  2.2.2 决策树

 能够捕捉非线性关系，且具有较好的可解释性。通过可视化树结构，可以直观展示企业违约风险的决策路径。

###  2.2.3 随机森林

 通过集成多棵决策树，提升模型的泛化性能。适用于处理高维特征数据，并能够输出特征重要性。

###  2.2.4 XGBoost / LightGBM

 在风险预测中常被证明具有优越的性能。它们通过梯度提升方法迭代训练，能够高效处理大规模数据，具有较好的拟合效果和计算效率。

###  2.2.5 其他方法（创新补充）

 为提升可解释性，本项目尝试结合 **SHAP（Shapley Additive Explanations）**，在保证性能的同时，明确哪些特征在多大程度上推动模型预测结果。

## 2.3 模型评估方法

##  2.3.1 评估指标

 **准确率（Accuracy）**：衡量整体预测正确率；

- **召回率（Recall）**：重点关注识别出高风险企业的能力；
- **F1 值**：在精确率与召回率之间取得平衡；
- **AUC**：衡量模型区分正负样本的能力；
- **KS** **值**：用于评估在信贷风险预测中的区分度，越高越好。

###  2.3.2 交叉验证

 采用 K 折交叉验证，保证模型评估结果的稳健性，避免因数据划分导致的偶然性。

1. # 实验

## 3.1 数据集构建（train.csv / test.csv）

数据集随机划分为训练集（70%）、验证集（15%）、测试集（15%）。同时保证违约样本与非违约样本比例在各数据集中的一致性，避免模型训练偏差。

## 3.2 模型训练与预测结果

**逻辑回归**：表现稳定，可解释性强，但预测能力有限。

**决策树**：在部分特征上表现良好，但存在过拟合倾向。

**随机森林**：整体表现优于单一模型，AUC 和 F1 值较高。

**XGBoost** **/ LightGBM**：在准确率、AUC 和 KS 值上均表现最佳，运行效率也较高。

## 3.3 模型对比（表格 + ROC曲线）

![img](https://wcn4d0jiord0.feishu.cn/space/api/box/stream/download/asynccode/?code=ODM2NWNjOTJiNmJhOGY5ZjI3NGJkNTBiMzcxMDlhZTdfdE9UbXB1UkI0cXNkQm5DVUdtUzE2SGxYTEgzaDdZeGVfVG9rZW46V08xdGJCYUg0b09YUjR4UDg0WWMxeUdabnJoXzE3NTkxNDUyNTk6MTc1OTE0ODg1OV9WNA)

表格展示各模型的 Accuracy、Recall、F1、AUC、KS 值。

ROC 曲线对比模型整体区分能力，XGBoost 曲线最优。

混淆矩阵揭示模型对违约样本的识别能力。

## 3.4 调参与特征重要性分析（SHAP / LIME）

通过网格搜索和贝叶斯优化对 XGBoost / LightGBM 的学习率、深度等超参数进行调优。

特征重要性分析显示，现金流量比率、银行流水波动、纳税合规性等指标对违约风险预测影响显著。

SHAP 分析进一步揭示了每个企业的违约风险是由哪些因素驱动的，提升了模型的透明度。

1. # 应用价值

## 4.1 最优模型的应用场景（企业风险评估、信贷审批）

**企业风险评估**：金融机构在信贷审批时可使用模型进行企业信用打分。

**贷后管理**：在贷款发放后，持续监控企业风险，提前发现潜在违约信号。

**投资决策**：为投资机构提供企业风险参考，辅助决策。

## 4.2 系统演示界面（Streamlit/Flask）

本项目基于 **Streamlit/****Flask** 构建了可视化演示平台，用户可上传企业数据，实时获得风险预测结果。界面包括：

- 企业信息录入模块；
- 风险预测结果展示模块（违约概率、风险等级）；
- 特征贡献度解释模块（SHAP 可视化）。

## 4.3 可解释性在风控中的意义

金融机构在采用智能模型时，监管合规和透明度至关重要。

- 可解释性增强了模型在实际业务中的可信度；
- 使风控人员能够明确模型判断逻辑，从而辅助人工复核；
- 为企业提供反馈，帮助其改进经营与财务管理。

# 附录

1. ## 数据特征报告（初稿）

本项目共采集企业样本数据若干条，包含财务、银行流水、税务及外部特征四大类信息。初步特征报告如下：

1. ## 代码说明文档

项目代码分为以下几个主要模块：

**1.数据预处理模块**（`data_preprocessing.py`）

- 功能：加载原始数据，进行缺失值处理、异常值检测、标准化和特征编码。
- 输入：`raw_data.csv`
- 输出：`clean_data.csv`

**2.****特征工程****模块**（`feature_engineering.py`）

- 功能：计算 IV 值、相关性过滤，进行特征选择。
- 关键函数：
  - `calculate_iv()`：计算特征信息价值
  - `filter_features()`：剔除低贡献或高共线性特征

**3.建模与训练模块**（`model_train.py`）

- 功能：构建逻辑回归、决策树、随机森林、XGBoost 等模型，并训练与保存结果。
- 输出：训练好的模型文件（`model.pkl`）和预测结果文件。

**4.模型评估模块**（`evaluation.py`）

- 功能：计算 Accuracy、Recall、F1、AUC、KS 等指标；绘制 ROC 曲线。
- 输出：`metrics_report.csv`，ROC 曲线图。

**5.可解释性分析模块**（`interpretability.py`）

- 功能：基于 SHAP / LIME 分析特征对预测结果的贡献。
- 输出：特征重要性图表、解释报告。

**6.****应用界面模块**（`app.py`）

1.  功能：基于 **Streamlit** 搭建风险预测可视化界面，提供企业数据录入、预测和风险解读功能。

> 所有脚本均遵循 **PEP8 命名规范**，函数划分清晰，便于用户理解和复现。

1. ## 图表清单